<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Shirley&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Shirley&#39;s blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shirley&#39;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Shirley's blog</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shirley's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">代码小白的学习笔记</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/Intro_dp/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shirley Hou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shirley's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/Intro_dp/" itemprop="url">DP热身问题 (Leetcode)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-23T13:07:40+11:00">
                2018-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/刷题/" itemprop="url" rel="index">
                    <span itemprop="name">刷题</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>DP, 3027的重点.</p>
<p>入门章节 </p>
<p><strong>学完并熟练掌握INFO1105/数据结构的同学可以跳过这篇.</strong></p>
<h2 id="Fibonacci"><a href="#Fibonacci" class="headerlink" title="Fibonacci"></a>Fibonacci</h2><p>我们回忆一下INFO1110里讲过的递归寻找斐波那契数列的问题</p>
<p>斐波那契数列的递归定义如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">F(0) = 0</span><br><span class="line">F(1) = 1</span><br><span class="line">F(n) = F(n-1)+F(n-2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">用文字来说，就是费波那契数列由0和1开始，之后的费波那契系数就是由之前的两数相加而得出。</span><br><span class="line">从第0项开始的费波那契系数是：</span><br><span class="line"></span><br><span class="line">0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233…</span><br></pre></td></tr></table></figure>
<p>如果用递归的方法来写找第N个斐波那契数, 非常简单直接<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">0</span> <span class="keyword">or</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> fibonacci(n<span class="number">-1</span>) + fibonacci(n<span class="number">-2</span>)</span><br></pre></td></tr></table></figure></p>
<p>请自己试一试, 在你的电脑上找<code>fibonacci(50)</code> 大概需要多久?</p>
<hr>
<p>我猜基本上你没耐心等到50 :D</p>
<p>有没有更快的办法呢?</p>
<p>首先我们来看一看为什么这个fibonaaci要跑这么久.</p>
<p>举一个简单的例子, 我们要算 f(5), 我们数一下有几次操作.<br>对于递归内部, 假设每次我们都先展开计算左边那半部分.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">f(5) = f(4) + f(3)</span><br><span class="line">f(4) = f(3) + f(2)</span><br><span class="line">f(3) = f(2) + f(1)</span><br><span class="line">f(2) = f(1) + f(0)</span><br><span class="line">f(1) = 1 return</span><br><span class="line">f(0) = 0 return</span><br><span class="line">f(2) = 1 + 0 = 2 return</span><br><span class="line">f(3) = 2 + f(1)</span><br><span class="line">f(1) = 1 return</span><br><span class="line">f(3) = 2 + 1 = 3 return</span><br><span class="line">f(4) = 3 + f(2)</span><br><span class="line">f(2) = f(1) + f(0)</span><br><span class="line">f(1) = 1 return</span><br><span class="line">f(0) = 0 return</span><br><span class="line">f(2) = 1 + 0 = 2 return</span><br><span class="line">f(4) = 3 + 2 = 5 return</span><br><span class="line">f(5) = 5 + f(3)</span><br><span class="line">f(3) = f(2) + f(1)</span><br><span class="line">f(2) = f(1) + f(0)</span><br><span class="line">f(1) = 1 return</span><br><span class="line">f(0) = 0 return</span><br><span class="line">f(2) = 1 + 0 = 2 return</span><br><span class="line">f(3) = 2 + f(1)</span><br><span class="line">f(1) = 1 return</span><br><span class="line">f(3) = 2 + 1 = 3 return</span><br><span class="line">f(5) = 5 + 3 = 8 return</span><br></pre></td></tr></table></figure></p>
<p>有没有发现我们中间重复计算了很多次f(3), f(2), f(1), f(0)的部分呢?</p>
<p>实际上, 由于我们求过了f(3), f(2), f(1), f(0), 却没有把这些值保存下来, 这导致了递归版本的斐波那契数列的运行时间是指数级别的. </p>
<p>为什么是O(2^n)呢? 很显然, f(n) = f(n-1) + f(n-2). 如果计算f(n+1) = f(n) + f(n-1). 则f(n), 包括f(n-1)的部分都要被重复计算. 精确的来说, 斐波那契数列的复杂度是 1.618^n, 黄金分割比值.</p>
<p>下面我们来介绍一下动态规划思想.</p>
<p>首先, 它所做的是”把算过的东西存起来”.</p>
<p>但这门课中最重要的是, 利用它来拆分复杂的数学问题.</p>
<ol>
<li><p>首先，我们要找到某个子问题的最优解，然后在它的帮助下，找到下一个状态的最优解。</p>
</li>
<li><p>通常许多子问题非常相似，为此动态规划法试图<strong>仅仅解决每个子问题一次</strong>，从而减少计算量. 一旦某个给定子问题的解已经算出，则将其记忆化<strong>存储</strong>，以便下次需要同一个子问题解之时<strong>直接查表</strong>.</p>
</li>
</ol>
<p>目前, 我们至少可以做到”把算过的东西存起来”.</p>
<p>如何存? 怎么查表? 不妨自己试试.(下面也有答案)</p>
<h2 id="台阶问题"><a href="#台阶问题" class="headerlink" title="台阶问题"></a>台阶问题</h2><p>理解了斐波那契问题之后, 来试一试非常相似的一道台阶问题吧!</p>
<h2 id="Leetcode-70-Climbing-Stairs"><a href="#Leetcode-70-Climbing-Stairs" class="headerlink" title="Leetcode 70 Climbing Stairs"></a>Leetcode 70 Climbing Stairs</h2><p><a href="https://leetcode.com/problems/climbing-stairs/" target="_blank" rel="noopener">原题链接</a></p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>你有一个N个台阶的梯子, 你可以一次走两格或者一次走一格.<br>一共有几种走法?</p>
<p>比如说一个这样的例子:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input: 3</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: There are three ways to climb to the top.</span><br><span class="line">1. 1 step + 1 step + 1 step</span><br><span class="line">2. 1 step + 2 steps</span><br><span class="line">3. 2 steps + 1 step</span><br></pre></td></tr></table></figure>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>没有头绪的时候, 首先思考一下base case.</p>
<p>如果我们一个台阶都没有? 那就没有走法了. return 0.<br>我们如果只有一个台阶, 那就只能有一种走法, 走一格.<br>我们如果只有2个台阶, 那就只能有2种走法, 两次一格, 或者, 一次2格.</p>
<p>如果我们有三个台阶呢?<br>不妨想一想, 我们是如何到台阶3的? </p>
<p>我们既然一次只能走两格或者一格, 那说明上一步我们要么在台阶1 要么在台阶2.</p>
<p>这样是不是就豁然开朗了一些?<br>我到台阶3的走法, 是我到台阶2的走法, 与台阶1的走法之和.</p>
<p>这个问题的子问题与递推关系式, 恰好就和斐波那契数列一样:<br>f(n) = f(n-1) + f(n-2).</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">climbStairs</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> n&lt;=<span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> n</span><br><span class="line">        p=[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        p[<span class="number">0</span>]=<span class="number">0</span></span><br><span class="line">        p[<span class="number">1</span>]=<span class="number">1</span></span><br><span class="line">        p[<span class="number">2</span>]=<span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>,n+<span class="number">1</span>):</span><br><span class="line">                p[i] = p[i<span class="number">-1</span>]+p[i<span class="number">-2</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> p[n]</span><br></pre></td></tr></table></figure>
<h3 id="动态规划所适用的情况"><a href="#动态规划所适用的情况" class="headerlink" title="动态规划所适用的情况"></a>动态规划所适用的情况</h3><p>(摘自维基百科)</p>
<ol>
<li><strong>最优子结构</strong>. 如果问题的最优解所包含的子问题的解也是最优的，我们就称该问题具有最优子结构性质（即满足最优化原理）。最优子结构性质为动态规划算法解决问题提供了重要线索。</li>
</ol>
<p>比如, 在爬台阶的问题里, 可以这么理解:<br>如果我想知道第N个斐波那契数, 我必然会求解第N-1和第N-2个斐波那契数.<br>不会存在我求第N个的时候, 所使用的N-2与N-1并不等同于N-2与N-1的最优解.</p>
<ol start="2">
<li><strong>无后效性</strong>. 即子问题的解一旦确定，就不再改变，不受在这之后、包含它的更大的问题的求解决策影响。</li>
</ol>
<p>结合上一条一起理解, 就是所有的子问题都可以安全的用相同的递推公式.</p>
<ol start="3">
<li><strong>子问题重叠性质</strong>. 子问题重叠性质是指在用递归算法自顶向下对问题进行求解时，每次产生的子问题并不总是新问题，有些子问题会被重复计算多次。动态规划算法正是利用了这种子问题的重叠性质，对每一个子问题只计算一次，然后将其计算结果保存在一个表格中，当再次需要计算已经计算过的子问题时，只是在表格中简单地查看一下结果，从而获得较高的效率.</li>
</ol>
<p>这就是”把算过的部分存起来”的概念.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/16/dp_best_time_stock_series/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shirley Hou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shirley's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/16/dp_best_time_stock_series/" itemprop="url">Best time to buy and sell stock 系列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-16T19:23:56+11:00">
                2018-12-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/刷题/" itemprop="url" rel="index">
                    <span itemprop="name">刷题</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这套老经典了, 有六道题, 从Greedy做到DP.</p>
<p>分别是:</p>
<ul>
<li>121 Best Time to Buy and Sell Stock</li>
<li>122 Best Time to Buy and Sell Stock II</li>
<li>123 Best Time to Buy and Sell Stock III</li>
<li>188 Best Time to Buy and Sell Stock IV</li>
<li>122 Best Time to Buy and Sell Stock with cool down</li>
<li>714 Best Time to Buy and Sell Stock with transaction fee</li>
</ul>
<h2 id="121-Best-Time-to-Buy-and-Sell-Stock"><a href="#121-Best-Time-to-Buy-and-Sell-Stock" class="headerlink" title="121. Best Time to Buy and Sell Stock"></a>121. Best Time to Buy and Sell Stock</h2><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">原题链接</a></p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>这个function的input是个<code>int</code>一位数组, 每一位代表当天的股票价格. </p>
<p>我们的目的是在仅仅能交易一次的情况下最大化收益. 求最大的收益.</p>
<p>举例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: [7,1,5,3,6,4]</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: 第二天买入第五天卖出, profit = 6-1 = 5.</span><br></pre></td></tr></table></figure></p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这是一个Easy的贪心问题. </p>
<p>我们的目的就是找到整个价格波动中的’最高点’和’最低点’,只要这个’最高点’发生在’最低点’之后就可以被考虑了.</p>
<p>直观需要画图: (leetcode的原图)<br><img src="images/121_profit_graph.png" alt="121_profit_graph"></p>
<p>这里的’最低点’是第二天, ‘最高点’是第五天</p>
<p>这里用one pass才能过. 还是有一点点小tricky的.</p>
<p>one pass就是每一天扫过来, 更新记录过的最小价格<code>min_price</code>, <strong>或者</strong>用当天价格去减去记录中的<code>min_price</code>, 就是以当天为截止日期的最好收益<code>max_profit</code>. (也有点dp的意味在里面啊!) </p>
<p><strong>为什么可以这样one pass呢? </strong></p>
<p>如果某天的价格更新了最低, 这个更新只会影响到它之后的收益计算. 恰好和题意相符合. </p>
<p>需要非常注意一点就是以上步骤的加粗<strong>或者</strong>很重要, 因为我们不能再在同一天买进卖出, 更新了<code>min_price</code>就不可以更新<code>max_profit</code>.</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, prices)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type prices: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> len(prices)==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        opt = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> prices]</span><br><span class="line">        max_profit= <span class="number">0</span></span><br><span class="line">        min_price = float(<span class="string">'inf'</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> prices:</span><br><span class="line">            <span class="keyword">if</span> i &lt; min_price:</span><br><span class="line">                min_price= i</span><br><span class="line">            <span class="keyword">elif</span> i-min_price&gt;max_profit: <span class="comment">#can't buy sell on same day</span></span><br><span class="line">                max_profit = max(i-min_price, max_profit)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> max_profit</span><br></pre></td></tr></table></figure>
<h3 id="Submission-Detail"><a href="#Submission-Detail" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><p>40ms, 99.98%.</p>
<h2 id="122-Best-Time-to-Buy-and-Sell-Stock-II"><a href="#122-Best-Time-to-Buy-and-Sell-Stock-II" class="headerlink" title="122. Best Time to Buy and Sell Stock II"></a>122. Best Time to Buy and Sell Stock II</h2><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener">原题链接</a></p>
<h3 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h3><p>和上一题一样, 这个function的input是个<code>int</code>数组, 代表每天的股票价格. </p>
<p>与上一题有所不同的是, 我们可以交易无限多次. 依旧是不能同一天买进卖出. </p>
<p>求最大的收益.</p>
<p>举例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: [7,1,5,3,6,4]</span><br><span class="line">Output: 7</span><br><span class="line">Explanation: 第二天买进第三天卖出, profit = 5-1 = 4.</span><br><span class="line">             第四天买进第五天卖出, profit = 6-3 = 3.</span><br></pre></td></tr></table></figure></p>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>这是一个Easy的贪心问题. 比上一题还要直观.</p>
<p>想一下以下几种情况:<br>[1,2,3,4,5]. 持续增长的价格, 最好第一天最后一天再卖. 如果中间有买卖行为则亏了, 因为不能同时买卖.</p>
<p>[5,4,3,2,1]. 持续跌的价格, 和上题一样, 不要进行任何买卖.</p>
<p>[1,3,3,3,3,6]. 中间有平台的价格, 第一天买最后一天卖的收益 和在平台期进行买卖, 效果一样. </p>
<p>[1,3,2,4,3,5]. 这种情况则收入是2*3 = 6 (第一天买第二天卖第三天买第四天卖..), 比第一天买最后一天卖来的多. </p>
<p>这几个例子可以说明要充分利用每一次价格波动的时候买卖.平台则没有影响.</p>
<p>假设<code>[n0..min, n1, n2,...max, n3..]</code>的情况, 则中间但凡有<code>(n1-n2) &gt; 0</code>, 那<code>(n1 - min) + (max - n2) = (max - min) + (n1 - n2) &gt; (max - min)</code>, 都比只在<code>min</code>和<code>max</code>之间交易来得好.</p>
<p>所以, 只要是但凡今天的价格比昨天高, 我们就继续按住不卖(中间不要买卖, 因为在连续升值中间买卖会亏), 直到出现平台或者跌价, 则再次马上买进.</p>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, prices)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type prices: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment">#this is a greedy approach: we add on profit whenever day &gt; day-1.</span></span><br><span class="line">        n = len(prices)</span><br><span class="line">        <span class="keyword">if</span> n&lt;=<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        total_profit = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> prices[i]-prices[i<span class="number">-1</span>]&gt;<span class="number">0</span>:</span><br><span class="line">                total_profit+=prices[i]-prices[i<span class="number">-1</span>]</span><br><span class="line">            <span class="comment">#这里的一直hold住, 直到跌价就卖出, 有点抽象. 体会一下.</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> total_profit</span><br></pre></td></tr></table></figure>
<h3 id="Submission-Detail-1"><a href="#Submission-Detail-1" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><p>44ms, 85.98%.</p>
<h2 id="123-Best-Time-to-Buy-and-Sell-Stock-III-188-Best-Time-to-Buy-and-Sell-Stock-IV"><a href="#123-Best-Time-to-Buy-and-Sell-Stock-III-188-Best-Time-to-Buy-and-Sell-Stock-IV" class="headerlink" title="123 Best Time to Buy and Sell Stock III, 188 Best Time to Buy and Sell Stock IV"></a>123 Best Time to Buy and Sell Stock III, 188 Best Time to Buy and Sell Stock IV</h2><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener">123: 原题链接</a></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank" rel="noopener">188: 原题链接</a></p>
<h3 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h3><p>input是个<code>int</code>数组, 代表每天的股票价格. </p>
<p>与上一题有所不同的是, Best Time to Buy and Sell Stock IV里我们最多可以交易k次.<br>Best Time to Buy and Sell Stock III是这个问题的一个子集. k=2次.</p>
<p>求最大的收益.</p>
<p>举例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: [3,2,6,5,0,3], k = 2</span><br><span class="line">Output: 7</span><br><span class="line">Explanation: 第二天买入第三天卖出, profit = 6-2 = 4.</span><br><span class="line">             第五天买入第六天卖出, profit = 3-0 = 3.</span><br></pre></td></tr></table></figure></p>
<h3 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h3><p>这是一个DP典型背包问题, 有k次选择机会(对应背包中的volume限制), 求最大化的价值.<br>背包里的物品对应执行一次买进卖出的行为.<br>可以由以下方程概括:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dp[i][x] = max( dp[i<span class="number">-1</span>][x] , <span class="comment">#不进行买卖, 可用选择机会不变</span></span><br><span class="line">                dp[j][x – <span class="number">1</span>] + prices[i] – prices[j] <span class="comment">#进行买卖, 需要loop背包矩阵上一排从0到i的最优解 求最大值</span></span><br><span class="line">              ), <span class="keyword">for</span> all j &lt; i.</span><br></pre></td></tr></table></figure></p>
<p>然而这样子写是TLE了.</p>
<h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h3><p>直观的背包: TLE<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, k, prices)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type k: int</span></span><br><span class="line"><span class="string">        :type prices: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        dp[i][x] = max(dp[i-1][x] , dp[j][x – 1] + prices[i] – prices[j]) for all j &lt; i.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n = len(prices)</span><br><span class="line">        <span class="keyword">if</span> n&lt;=<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        dp=[[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,k+<span class="number">1</span>)] <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):  </span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,k+<span class="number">1</span>):</span><br><span class="line">                max_counter = <span class="number">0</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, i):</span><br><span class="line">                    diff = prices[i]-prices[j]</span><br><span class="line">                    max_counter = max(max_counter,dp[j][x<span class="number">-1</span>]+diff) </span><br><span class="line">                    </span><br><span class="line">                dp[i][x]=max(dp[i<span class="number">-1</span>][x],max_counter)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure></p>
<p><strong>改良的背包</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, k, prices)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type k: int</span></span><br><span class="line"><span class="string">        :type prices: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        global[i][j]=max(local[i][j],global[i-1][j])</span></span><br><span class="line"><span class="string">        local[i][j]=max(global[i-1][j-1]+max(diff,0),local[i-1][j]+diff)</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n = len(prices)</span><br><span class="line">        <span class="keyword">if</span> n&lt;=<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> k&lt;n//<span class="number">2</span>:</span><br><span class="line">            Local=[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(k+<span class="number">1</span>)]</span><br><span class="line">            Global=[<span class="number">0</span> <span class="keyword">for</span> j <span class="keyword">in</span> range(k+<span class="number">1</span>)]</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">                diff = prices[i]-prices[i<span class="number">-1</span>] <span class="comment">#这里用回之前的逻辑,只要不跌价就一直怼</span></span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(k, <span class="number">0</span>,<span class="number">-1</span>):</span><br><span class="line">                    Local[j]=max(Global[j<span class="number">-1</span>]+max(diff,<span class="number">0</span>),Local[j]+diff)</span><br><span class="line">                    Global[j]=max(Local[j],Global[j])</span><br><span class="line">            <span class="keyword">return</span> Global[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            total_profit = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">                diff = prices[i]-prices[i<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> diff&gt;<span class="number">0</span>:</span><br><span class="line">                    total_profit+=diff</span><br><span class="line">            <span class="keyword">return</span> total_profit</span><br></pre></td></tr></table></figure>
<h3 id="Submission-Detail-2"><a href="#Submission-Detail-2" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><p>172 ms, 21.46%.</p>
<h2 id="309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown-714-Best-Time-to-Buy-and-Sell-Stock-with-transaction-fee"><a href="#309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown-714-Best-Time-to-Buy-and-Sell-Stock-with-transaction-fee" class="headerlink" title="309. Best Time to Buy and Sell Stock with Cooldown, 714. Best Time to Buy and Sell Stock with transaction fee"></a>309. Best Time to Buy and Sell Stock with Cooldown, 714. Best Time to Buy and Sell Stock with transaction fee</h2><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/" target="_blank" rel="noopener">309: 原题链接</a></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/" target="_blank" rel="noopener">714: 原题链接</a></p>
<h3 id="代码-309-with-transaction-fee"><a href="#代码-309-with-transaction-fee" class="headerlink" title="代码: 309 (with transaction fee)"></a>代码: 309 (with transaction fee)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, prices)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type prices: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment">#依旧尽量多的买卖.所以至多是i-1 i-2的关系</span></span><br><span class="line">        <span class="comment">#如果前一天sell 今天就需要作废 不能用作买进</span></span><br><span class="line">        <span class="comment">#如果前一天没有sell 今天可以用作买进</span></span><br><span class="line">        <span class="comment">#buy[i] = max(sell[i-2]-prices[i], buy[i-1])</span></span><br><span class="line">        <span class="comment">#sell[i]=max(buy[i-1]+prices[i]买入, sell[i-1]不买)</span></span><br><span class="line">        n=len(prices)</span><br><span class="line">        <span class="keyword">if</span> n&lt;=<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> n==<span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> max(<span class="number">0</span>, prices[<span class="number">1</span>]-prices[<span class="number">0</span>])</span><br><span class="line">        total_profit = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        buy=[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        sell=[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        buy[<span class="number">0</span>]=-prices[<span class="number">0</span>]</span><br><span class="line">        buy[<span class="number">1</span>]=max(-prices[<span class="number">0</span>], -prices[<span class="number">1</span>])</span><br><span class="line">        sell[<span class="number">1</span>]=max(<span class="number">0</span>,buy[<span class="number">0</span>]+prices[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>,n):</span><br><span class="line">            buy[i] = max(sell[i<span class="number">-2</span>]-prices[i], buy[i<span class="number">-1</span>])</span><br><span class="line">            sell[i]= max(buy[i<span class="number">-1</span>]+prices[i], sell[i<span class="number">-1</span>])</span><br><span class="line">                </span><br><span class="line">        <span class="comment">#print(sell, buy)</span></span><br><span class="line">        <span class="keyword">return</span> sell[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h3 id="代码-714-with-transaction-fee"><a href="#代码-714-with-transaction-fee" class="headerlink" title="代码: 714 (with transaction fee)"></a>代码: 714 (with transaction fee)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, prices, fee)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type prices: List[int]</span></span><br><span class="line"><span class="string">        :type fee: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        和309基本就是照抄, 对每一天来说可以买入或者不买</span></span><br><span class="line"><span class="string">        买入一次就需要-fee</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        n=len(prices)</span><br><span class="line">        <span class="keyword">if</span> n&lt;=<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        buy=[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        sell=[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        buy[<span class="number">0</span>]=-prices[<span class="number">0</span>]</span><br><span class="line">        sell[<span class="number">1</span>]=max(<span class="number">0</span>,buy[<span class="number">0</span>]+prices[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">            buy[i] = max(sell[i<span class="number">-1</span>]-prices[i], buy[i<span class="number">-1</span>])</span><br><span class="line">            sell[i]= max(buy[i<span class="number">-1</span>]+prices[i]-fee, sell[i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">return</span> sell[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/09/Warmup_dp/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shirley Hou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shirley's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/Warmup_dp/" itemprop="url">DP热身问题 (Leetcode)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T17:20:19+11:00">
                2018-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/刷题/" itemprop="url" rel="index">
                    <span itemprop="name">刷题</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>DP, 3027的重点.</p>
<p>需要反复暴露在不同的题型下才能触类旁通的类型.<br>这是热身的章节.<br>DP概念入门</p>
<h2 id="Leetcode-256-Paint-House"><a href="#Leetcode-256-Paint-House" class="headerlink" title="Leetcode 256 Paint House"></a>Leetcode 256 Paint House</h2><p>Leet上的入门DP问题<br><a href="https://leetcode.com/problems/paint-house/" target="_blank" rel="noopener">原题链接</a></p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>有一排N个房子，可以用红绿蓝三色来涂，有一个COST[N][0:2]的信息分别表示在画第N个房子时红绿蓝分别的价格。<br>要求是相邻两个房子不能一样颜色。<br>求画到第N个房子的最低总价格.</p>
<p>比如说一个这样的例子:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input: [[17,2,17],[16,16,5],[14,3,19]]</span><br><span class="line">    价格:(红0蓝0绿0)(红1蓝1绿1)(红2蓝2绿2)</span><br><span class="line"></span><br><span class="line">Output: 10</span><br><span class="line">Explanation: 选择这样的涂法: 第0个房子是蓝色, 第1个房子绿色, 第2个房子蓝色.</span><br><span class="line">             这样的总价格是 2 + 5 + 3 = 10. 是所有可能性里最小的.</span><br></pre></td></tr></table></figure>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>在画第i个房子时候, 假设这一格要选红房子, 总价格为 <code>min[前一格(i-1)是绿格子的总价格，前一格(i-1)是蓝房子的总价格] + 这一格红房子的价格</code><br>那到了第N个房子, 最低价格就是红蓝绿里最低那个了.</p>
<p>需要开 OPT[3][N] 来存RGB分别在画第N个房子时的最低价格</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">updateOPT</span><span class="params">(self, OPT, i, costs)</span>:</span></span><br><span class="line">        <span class="comment">#if color = 'r':</span></span><br><span class="line">        OPT[<span class="number">0</span>][i]=min(OPT[<span class="number">1</span>][i<span class="number">-1</span>],OPT[<span class="number">2</span>][i<span class="number">-1</span>])+costs[i][<span class="number">0</span>]</span><br><span class="line">        <span class="comment">#elif color = 'b':</span></span><br><span class="line">        OPT[<span class="number">1</span>][i]=min(OPT[<span class="number">0</span>][i<span class="number">-1</span>],OPT[<span class="number">2</span>][i<span class="number">-1</span>])+costs[i][<span class="number">1</span>]</span><br><span class="line">        <span class="comment">#elif color = 'g':</span></span><br><span class="line">        OPT[<span class="number">2</span>][i]=min(OPT[<span class="number">0</span>][i<span class="number">-1</span>],OPT[<span class="number">1</span>][i<span class="number">-1</span>])+costs[i][<span class="number">2</span>]</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minCost</span><span class="params">(self, costs)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type costs: List[List[int]]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment">#No two houses are painted with the same color</span></span><br><span class="line">        <span class="comment">#target: total price is lowest</span></span><br><span class="line">        </span><br><span class="line">        N = len(costs)</span><br><span class="line">        <span class="keyword">if</span> N==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> len(costs[<span class="number">0</span>])==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        OPT= [[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(N)] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>)]</span><br><span class="line">        OPT[<span class="number">0</span>][<span class="number">0</span>]=costs[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        OPT[<span class="number">1</span>][<span class="number">0</span>]=costs[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">        OPT[<span class="number">2</span>][<span class="number">0</span>]=costs[<span class="number">0</span>][<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,N):</span><br><span class="line">            self.updateOPT(OPT, i, costs)</span><br><span class="line">        <span class="keyword">return</span> min(OPT[<span class="number">0</span>][N<span class="number">-1</span>], OPT[<span class="number">1</span>][N<span class="number">-1</span>], OPT[<span class="number">2</span>][N<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>
<h3 id="Submission-Detail"><a href="#Submission-Detail" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><p>24ms, 92.25%.</p>
<h2 id="Leetcode-276-Paint-Fence"><a href="#Leetcode-276-Paint-Fence" class="headerlink" title="Leetcode 276 Paint Fence"></a>Leetcode 276 Paint Fence</h2><p>Leet上的入门DP问题<br><a href="https://leetcode.com/problems/paint-fence/" target="_blank" rel="noopener">原题链接</a></p>
<h3 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h3><p>有一排n个桩子，可以给你k种颜色来涂<br>要求不能有连续三个桩子颜色相同。<br>求所有的画法一共有几种</p>
<p>例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Input: n = 3, k = 2</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: Take c1 as color 1, c2 as color 2. All possible ways are:</span><br><span class="line"></span><br><span class="line">            post1  post2  post3      </span><br><span class="line"> -----      -----  -----  -----       </span><br><span class="line">   1         c1     c1     c2 </span><br><span class="line">   2         c1     c2     c1 </span><br><span class="line">   3         c1     c2     c2 </span><br><span class="line">   4         c2     c1     c1  </span><br><span class="line">   5         c2     c1     c2</span><br><span class="line">   6         c2     c2     c1</span><br></pre></td></tr></table></figure></p>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>上来我居然有点一头雾水, 需要从题目里读取信息.</p>
<p>简单想一下可以发现, 第0位可以有k种画法, 第1位也可以用有k种画法. 两种结合有k*k种画法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">M[<span class="number">0</span>] = k</span><br><span class="line">M[<span class="number">1</span>] = M[<span class="number">0</span>]*k</span><br></pre></td></tr></table></figure></p>
<p>但从第三位开始, 既然不能连续三个一样, 那画第i个的时候必然<strong>与前两位的信息是有关的</strong></p>
<ol>
<li>这个位置如果<strong>和i-1位颜色相同</strong>, 那必须和i-2位不同,  那就有k-1种选法, 那到i的可能性就是有<code>M[i-2]*(k-1)</code>种画法</li>
<li>这个位置如果<strong>和i-1位不同</strong>, 那就有k-1种选法, 那到i的可能性就是有<code>M[i-1]*(k-1)</code>种画法</li>
</ol>
<p>这两者的可能性是相加的. </p>
<p>所以在第i位一共有那到i的可能性就是有<code>M[i-2]*(k-1) + M[i-1]*(k-1)</code>种画法</p>
<p>一些小点:</p>
<ul>
<li>如果n大于等于3, k小于等于1, 那就没可能符合要求, 回0.</li>
<li>如果n等于0, 回0</li>
<li>如果n==1, 或者(k&lt;=1 且 n&lt;=2), 回k (主要是判断下就不用开M这个array了)</li>
</ul>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numWays</span><span class="params">(self, n, k)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :type k: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        methods = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        <span class="keyword">if</span> n==<span class="number">0</span>: </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> n==<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> k</span><br><span class="line">        <span class="keyword">if</span> k&lt;=<span class="number">1</span> <span class="keyword">and</span> n&lt;=<span class="number">2</span>: </span><br><span class="line">            <span class="keyword">return</span> k</span><br><span class="line">        <span class="keyword">elif</span> k&lt;=<span class="number">1</span>: <span class="comment">#如果n大于3</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        methods[<span class="number">0</span>]=k <span class="comment"># 第一位有k种画法</span></span><br><span class="line">        methods[<span class="number">1</span>]=k*k</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, n):</span><br><span class="line">            methods[i]=methods[i<span class="number">-1</span>]*(k<span class="number">-1</span>)+methods[i<span class="number">-2</span>]*(k<span class="number">-1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> methods[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h3 id="Submission-Detail-1"><a href="#Submission-Detail-1" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><p>20ms, 97.30%.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/03/hello-world/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shirley Hou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shirley's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/03/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-03T22:06:32+11:00">
                2018-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Shirley Hou</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shirley Hou</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
